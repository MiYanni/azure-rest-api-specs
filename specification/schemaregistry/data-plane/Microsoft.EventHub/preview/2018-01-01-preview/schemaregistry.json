{
  "swagger": "2.0",
  "info": {
    "title": "Azure Schema Registry",
    "version": "2018-01-01-preview"
  },
  "paths": {
    "/$schemagroups/getSchemaById/{schema-id}": {
      "get": {
        "summary": "Get a registered schema by its unique ID reference.",
        "description": "Gets a registered schema by its unique ID.  Azure Schema Registry guarantees that ID is unique within a namespace.",
        "x-ms-examples": {
          "Get schema by ID": {
            "$ref": "./examples/OperationSchema_GetById.json"
          }
        },
        "operationId": "Schema_GetById",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "schema-id",
            "in": "path",
            "description": "References specific schema in registry namespace.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema group, schema name, and version."
              },
              "X-Serialization": {
                "type": "string",
                "description": "Serialization type for the schema being stored."
              },
              "X-Schema-Id": {
                "type": "string",
                "description": "References specific schema in registry namespace."
              },
              "X-Schema-Id-Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema ID."
              },
              "X-Schema-Version": {
                "type": "integer",
                "description": "Version of the returned schema."
              }
            },
            "schema": {
              "type": "string"
            }
          },
          "default": {
            "description": "An error response received from the Azure Schema Registry service.",
            "schema": {
              "$ref": "#/definitions/ServiceErrorResponse"
            }
          }
        }
      }
    },
    "/$schemagroups/{group-name}/schemas/{schema-name}": {
      "post": {
        "summary": "Get ID for existing schema.",
        "description": "Gets the ID referencing an existing schema within the specified schema group, as matched by schema content comparison.",
        "x-ms-examples": {
          "Get schema ID": {
            "$ref": "./examples/OperationSchema_GetIdByContent.json"
          }
        },
        "operationId": "Schema_GetIdByContent",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "group-name",
            "in": "path",
            "description": "Schema group under which schema is registered.  Group's serialization type should match the serialization type specified in the request.",
            "required": true,
            "type": "string"
          },
          {
            "name": "schema-name",
            "in": "path",
            "description": "Name of the registered schema.",
            "required": true,
            "type": "string"
          },
          {
            "name": "schema-content",
            "in": "body",
            "description": "String representation of the registered schema.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialization-type",
            "in": "header",
            "description": "Serialization type of the registered schema.  Must match serialization type of the specified schema group.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema group, schema name, and version."
              },
              "X-Serialization": {
                "type": "string",
                "description": "Serialization type for the schema being stored."
              },
              "X-Schema-Id": {
                "type": "string",
                "description": "References specific schema in registry namespace."
              },
              "X-Schema-Id-Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema ID."
              },
              "X-Schema-Version": {
                "type": "integer",
                "description": "Version of the returned schema."
              }
            },
            "schema": {
              "$ref": "#/definitions/SchemaId"
            }
          },
          "default": {
            "description": "An error response received from the Azure Schema Registry service.",
            "schema": {
              "$ref": "#/definitions/ServiceErrorResponse"
            }
          }
        }
      },
      "put": {
        "summary": "Register new schema",
        "description": "Register new schema. If schema of specified name does not exist in specified group, schema is created at version 1. If schema of specified name exists already in specified group, schema is created at latest version + 1.\n",
        "x-ms-examples": {
          "Register schema": {
            "$ref": "./examples/OperationSchema_Register.json"
          }
        },
        "operationId": "Schema_Register",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "group-name",
            "in": "path",
            "description": "Schema group under which schema should be registered.  Group's serialization type should match the serialization type specified in the request.",
            "required": true,
            "type": "string"
          },
          {
            "name": "schema-name",
            "in": "path",
            "description": "Name of schema being registered.",
            "required": true,
            "type": "string"
          },
          {
            "name": "schema-content",
            "in": "body",
            "description": "String representation of the schema being registered.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialization-type",
            "in": "header",
            "description": "Serialization type for the schema being registered.  Must match serialization type of the specified schema group.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema group, schema name, and version."
              },
              "X-Serialization": {
                "type": "string",
                "description": "Serialization type for the schema being registered."
              },
              "X-Schema-Id": {
                "type": "string",
                "description": "References specific schema in registry namespace."
              },
              "X-Schema-Id-Location": {
                "type": "string",
                "description": "URL location of schema, identified by schema ID."
              },
              "X-Schema-Version": {
                "type": "integer",
                "description": "Version of the returned schema."
              }
            },
            "schema": {
              "$ref": "#/definitions/SchemaId"
            }
          },
          "default": {
            "description": "An error response received from the Azure Schema Registry service.",
            "schema": {
              "$ref": "#/definitions/ServiceErrorResponse"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "SchemaId": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The id of the schema."
        }
      },
      "description": "The id of a Schema Registry schema."
    },
    "ServiceErrorResponse": {
      "type": "string",
      "description": "An error from the Schema Registry service."
    }
  },
  "parameters": {
    "ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "required": true,
      "type": "string",
      "description": "Schema Registry service API version that should be used."
    }
  }
}
